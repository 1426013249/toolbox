<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXIF éšç§æ¸…é™¤ â€” ä¸€é”®åˆ é™¤ç…§ç‰‡éšç§æ•°æ® | ToolBox</title>
    <meta name="description" content="å…è´¹åœ¨çº¿ç…§ç‰‡EXIFä¿¡æ¯æ¸…é™¤å·¥å…·ã€‚ä¸€é”®åˆ é™¤GPSå®šä½ã€è®¾å¤‡å‹å·ã€æ‹æ‘„æ—¶é—´ç­‰éšç§æ•°æ®ã€‚ä¸Šä¼ ç¤¾äº¤åª’ä½“å‰çš„å¿…å¤‡æ“ä½œã€‚100%æœ¬åœ°å¤„ç†ã€‚">
    <meta name="keywords" content="EXIFæ¸…é™¤,åˆ é™¤ç…§ç‰‡GPS,å»é™¤ç…§ç‰‡ä½ç½®ä¿¡æ¯,æ¸…é™¤å›¾ç‰‡éšç§,ç…§ç‰‡éšç§ä¿æŠ¤,EXIFåˆ é™¤,æœ¬åœ°å¤„ç†">
    <link rel="canonical" href="https://toolbox-smoky.vercel.app/src/tools/exif-remove/index.html">
    <meta property="og:title" content="EXIF éšç§æ¸…é™¤ â€” ä¸€é”®åˆ é™¤ç…§ç‰‡éšç§æ•°æ®">
    <meta property="og:description" content="åˆ é™¤ç…§ç‰‡ä¸­çš„GPSã€è®¾å¤‡ä¿¡æ¯ç­‰éšç§æ•°æ®ã€‚100%æœ¬åœ°å¤„ç†ã€‚">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="EXIF éšç§æ¸…é™¤ â€” åˆ é™¤ç…§ç‰‡ä¸­GPSç­‰éšç§æ•°æ®">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org", "@type": "WebApplication",
      "name": "EXIFéšç§æ¸…é™¤", "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "CNY" },
      "featureList": ["GPSå®šä½åˆ é™¤", "è®¾å¤‡ä¿¡æ¯æ¸…é™¤", "EXIFå®Œå…¨ç§»é™¤", "æ‰¹é‡å¤„ç†", "æœ¬åœ°å¤„ç†"]
    }
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y4N0TE83KD"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments) } gtag('js', new Date()); gtag('config', 'G-Y4N0TE83KD');</script>
    <link rel="stylesheet" href="../../shared/style.css">
    <link rel="stylesheet" href="../../shared/donate.css">
    <style>
        .tool-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }

        @media(max-width:1024px) {
            .tool-area {
                grid-template-columns: 1fr;
            }
        }

        .upload-zone {
            border: 2px dashed var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 3rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            background: rgba(99, 102, 241, 0.03);
        }

        .upload-zone:hover,
        .upload-zone.drag-over {
            border-color: var(--brand-primary);
            background: rgba(99, 102, 241, 0.08);
        }

        .upload-zone .icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            display: block;
        }

        .exif-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.82rem;
        }

        .exif-table th {
            text-align: left;
            padding: 0.5rem 0.75rem;
            color: var(--text-muted);
            font-weight: 500;
            border-bottom: 1px solid var(--border-subtle);
        }

        .exif-table td {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }

        .exif-table .key {
            color: var(--text-secondary);
            font-weight: 500;
            width: 40%;
        }

        .exif-table .val {
            color: var(--text-primary);
            word-break: break-all;
        }

        .exif-table .danger {
            color: #ef4444;
            font-weight: 600;
        }

        .privacy-banner {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.25rem;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: 2rem;
        }

        .privacy-banner .shield-icon {
            font-size: 1.5rem;
        }

        .privacy-banner p {
            font-size: 0.85rem;
            color: #34d399;
            margin: 0;
        }

        .warning-box {
            padding: 0.75rem 1rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
        }

        .warning-box p {
            font-size: 0.8rem;
            color: #f87171;
            margin: 0;
        }

        .safe-box {
            padding: 0.75rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
        }

        .safe-box p {
            font-size: 0.8rem;
            color: #34d399;
            margin: 0;
        }

        .action-bar {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: flex-end;
        }

        .file-thumb {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--radius-md);
            display: block;
            margin: 0 auto 1rem;
        }

        #fileInput {
            display: none;
        }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="header-inner">
            <a href="../../../index.html" class="logo"><span class="logo-icon">ğŸ§°</span> ToolBox</a>
            <nav class="header-nav"><a href="../../../index.html">é¦–é¡µ</a><a href="../id-watermark/index.html">èº«ä»½è¯æ°´å°</a><a
                    href="../image-compress/index.html">å›¾ç‰‡å‹ç¼©</a></nav>
        </div>
    </header>

    <main class="main-content">
        <section class="tool-hero">
            <span class="badge badge-privacy">ğŸ›¡ï¸ 100% æœ¬åœ°å¤„ç†</span>
            <h1>EXIF éšç§æ¸…é™¤</h1>
            <p class="subtitle">ä¸€é”®åˆ é™¤ç…§ç‰‡ä¸­çš„ GPS å®šä½ã€è®¾å¤‡å‹å·ã€æ‹æ‘„æ—¶é—´ç­‰éšç§æ•°æ®<br>å‘æœ‹å‹åœˆã€ä¸Šä¼ ç¤¾äº¤åª’ä½“å‰çš„å¿…å¤‡æ“ä½œ</p>
        </section>

        <div class="privacy-banner">
            <span class="shield-icon">ğŸ”’</span>
            <p><strong>éšç§æ‰¿è¯ºï¼š</strong>æ‰€æœ‰å¤„ç†å‡åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ‚¨çš„ç…§ç‰‡<strong>ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</strong>ã€‚</p>
        </div>

        <div class="tool-area">
            <div class="card">
                <div class="upload-zone" id="uploadZone">
                    <input type="file" id="fileInput" accept="image/jpeg,image/jpg" multiple>
                    <span class="icon">ğŸ”’</span>
                    <p style="font-size:0.9rem;"><strong>ç‚¹å‡»é€‰æ‹©æˆ–æ‹–å…¥ç…§ç‰‡</strong></p>
                    <p style="font-size:0.75rem;color:var(--text-muted);margin-top:0.25rem;">ä»…æ”¯æŒ JPG/JPEG æ ¼å¼ï¼ˆEXIF ä»…å­˜åœ¨äº
                        JPEG ä¸­ï¼‰</p>
                </div>
                <div id="thumbArea" style="margin-top:1rem;display:none;">
                    <img id="thumbImg" class="file-thumb" alt="é¢„è§ˆ">
                    <p style="text-align:center;font-size:0.8rem;color:var(--text-muted);" id="fileInfo"></p>
                </div>
                <div class="action-bar">
                    <button class="btn btn-secondary" id="resetBtn" disabled>ğŸ”„ é‡æ–°é€‰æ‹©</button>
                    <button class="btn btn-primary" id="downloadBtn" disabled aria-label="ä¸‹è½½æ¸…é™¤åçš„ç…§ç‰‡">ğŸ’¾ ä¸‹è½½å¹²å‡€ç…§ç‰‡</button>
                </div>
            </div>

            <div class="card">
                <h3 style="font-size:1rem;margin-bottom:1rem;">ğŸ“‹ EXIF ä¿¡æ¯æ£€æµ‹</h3>
                <div id="statusBox"></div>
                <div id="exifContent">
                    <div style="text-align:center;color:var(--text-muted);padding:2rem 0;">
                        <span style="font-size:2rem;display:block;margin-bottom:0.5rem;">ğŸ”</span>
                        ä¸Šä¼ ç…§ç‰‡åå°†è‡ªåŠ¨æ£€æµ‹ EXIF æ•°æ®
                    </div>
                </div>
            </div>
        </div>

        <section style="margin-top:3rem;border-top:1px solid var(--border-subtle);padding-top:2rem;">
            <h2 style="font-size:1.25rem;margin-bottom:1.5rem;text-align:center;">ä»€ä¹ˆæ˜¯ EXIFï¼Ÿä¸ºä»€ä¹ˆè¦æ¸…é™¤ï¼Ÿ</h2>
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;">
                <div class="card" style="padding:1.25rem;">
                    <h3 style="font-size:1rem;margin-bottom:0.5rem;color:var(--brand-primary-light);">ğŸ“ GPS å®šä½</h3>
                    <p style="font-size:0.85rem;color:var(--text-secondary);">æ‰‹æœºæ‹æ‘„çš„ç…§ç‰‡ä¼šè®°å½•ç²¾ç¡®çš„ç»çº¬åº¦åæ ‡ã€‚åˆ«äººå¯ä»¥é€šè¿‡ç…§ç‰‡çŸ¥é“ä½ çš„å®¶åº­ä½å€ã€‚</p>
                </div>
                <div class="card" style="padding:1.25rem;">
                    <h3 style="font-size:1rem;margin-bottom:0.5rem;color:var(--brand-primary-light);">ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
                    <p style="font-size:0.85rem;color:var(--text-secondary);">ç…§ç‰‡ä¸­åŒ…å«æ‰‹æœºå‹å·ã€ç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚å¯èƒ½æš´éœ²ä½ ä½¿ç”¨çš„è®¾å¤‡ã€‚</p>
                </div>
                <div class="card" style="padding:1.25rem;">
                    <h3 style="font-size:1rem;margin-bottom:0.5rem;color:var(--brand-primary-light);">ğŸ• æ—¶é—´ä¿¡æ¯</h3>
                    <p style="font-size:0.85rem;color:var(--text-secondary);">ç²¾ç¡®çš„æ‹æ‘„æ—¥æœŸå’Œæ—¶é—´ã€‚å¯ç”¨äºæ¨æ–­ä½ çš„è¡Œç¨‹å’Œä½œæ¯ã€‚</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <p>ToolBox â€” å…è´¹åœ¨çº¿å·¥å…·åˆé›† Â· 100% æµè§ˆå™¨æœ¬åœ°å¤„ç† Â· <a href="../../../index.html">è¿”å›é¦–é¡µ</a></p>
    </footer>
    <div class="toast" id="toast"></div>

    <script>
        (function () {
            'use strict';
            const uploadZone = document.getElementById('uploadZone');
            const fileInput = document.getElementById('fileInput');
            const thumbArea = document.getElementById('thumbArea');
            const thumbImg = document.getElementById('thumbImg');
            const fileInfo = document.getElementById('fileInfo');
            const exifContent = document.getElementById('exifContent');
            const statusBox = document.getElementById('statusBox');
            const downloadBtn = document.getElementById('downloadBtn');
            const resetBtn = document.getElementById('resetBtn');

            let cleanBlob = null;

            uploadZone.onclick = () => fileInput.click();
            uploadZone.ondragover = e => { e.preventDefault(); uploadZone.classList.add('drag-over'); };
            uploadZone.ondragleave = () => uploadZone.classList.remove('drag-over');
            uploadZone.ondrop = e => { e.preventDefault(); uploadZone.classList.remove('drag-over'); handleFile(e.dataTransfer.files[0]); };
            fileInput.onchange = e => handleFile(e.target.files[0]);

            resetBtn.onclick = () => location.reload();
            downloadBtn.onclick = () => {
                if (!cleanBlob) return;
                const a = document.createElement('a');
                a.href = URL.createObjectURL(cleanBlob);
                a.download = 'clean_' + Date.now() + '.jpg';
                a.click();
                showToast('âœ… å·²ä¸‹è½½æ¸…é™¤ EXIF åçš„ç…§ç‰‡');
                if (typeof ToolBoxDonate !== 'undefined') ToolBoxDonate.showThankYou();
            };

            async function handleFile(file) {
                if (!file || !file.type.match(/jpeg|jpg/i)) {
                    showToast('âš ï¸ è¯·é€‰æ‹© JPG/JPEG æ ¼å¼çš„ç…§ç‰‡');
                    return;
                }

                // Show thumbnail
                thumbImg.src = URL.createObjectURL(file);
                thumbArea.style.display = 'block';
                fileInfo.textContent = `${file.name} Â· ${formatSize(file.size)}`;

                // Read EXIF
                const buffer = await file.arrayBuffer();
                const exifData = parseExif(new Uint8Array(buffer));

                // Display EXIF info
                if (exifData.length > 0) {
                    const hasGPS = exifData.some(e => e.key.includes('GPS'));
                    statusBox.innerHTML = `<div class="warning-box"><p>âš ï¸ æ£€æµ‹åˆ° <strong>${exifData.length}</strong> é¡¹ EXIF æ•°æ®${hasGPS ? 'ï¼Œ<strong class="danger">åŒ…å« GPS å®šä½ä¿¡æ¯</strong>' : ''}ï¼å»ºè®®ç«‹å³æ¸…é™¤ã€‚</p></div>`;

                    let html = '<table class="exif-table"><tr><th>å­—æ®µ</th><th>å€¼</th></tr>';
                    for (const item of exifData) {
                        const isDanger = item.key.includes('GPS') || item.key.includes('Location');
                        html += `<tr><td class="key">${item.key}</td><td class="val${isDanger ? ' danger' : ''}">${item.value}</td></tr>`;
                    }
                    html += '</table>';
                    exifContent.innerHTML = html;
                } else {
                    statusBox.innerHTML = '<div class="safe-box"><p>âœ… æœªæ£€æµ‹åˆ° EXIF æ•°æ®ï¼Œæ­¤ç…§ç‰‡å·²ç»æ˜¯å®‰å…¨çš„ã€‚</p></div>';
                    exifContent.innerHTML = '<p style="text-align:center;color:var(--text-muted);padding:1rem;">è¯¥å›¾ç‰‡ä¸åŒ…å« EXIF å…ƒæ•°æ®ã€‚</p>';
                }

                // Strip EXIF: re-encode through Canvas (removes all metadata)
                const img = new Image();
                img.onload = () => {
                    const c = document.createElement('canvas');
                    c.width = img.naturalWidth; c.height = img.naturalHeight;
                    const ctx = c.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    c.toBlob(blob => {
                        cleanBlob = blob;
                        downloadBtn.disabled = false;
                        resetBtn.disabled = false;
                    }, 'image/jpeg', 0.95);
                };
                img.src = URL.createObjectURL(file);
            }

            // Lightweight EXIF parser for display purposes
            function parseExif(data) {
                const results = [];
                if (data[0] !== 0xFF || data[1] !== 0xD8) return results; // Not JPEG

                let offset = 2;
                while (offset < data.length - 1) {
                    if (data[offset] !== 0xFF) break;
                    const marker = data[offset + 1];
                    if (marker === 0xD9) break; // EOI

                    if (marker === 0xE1) { // APP1 (EXIF)
                        const len = (data[offset + 2] << 8) | data[offset + 3];
                        const segment = data.slice(offset + 4, offset + 2 + len);
                        extractExifFields(segment, results);
                        break;
                    }

                    const segLen = (data[offset + 2] << 8) | data[offset + 3];
                    offset += 2 + segLen;
                }
                return results;
            }

            function extractExifFields(segment, results) {
                // Check for "Exif\0\0"
                const exifStr = String.fromCharCode(...segment.slice(0, 4));
                if (exifStr !== 'Exif') return;

                const tiffStart = 6;
                const isLE = segment[tiffStart] === 0x49; // II = little endian

                function readU16(off) {
                    return isLE ? segment[off] | (segment[off + 1] << 8) : (segment[off] << 8) | segment[off + 1];
                }
                function readU32(off) {
                    return isLE ? segment[off] | (segment[off + 1] << 8) | (segment[off + 2] << 16) | (segment[off + 3] << 24) : (segment[off] << 24) | (segment[off + 1] << 16) | (segment[off + 2] << 8) | segment[off + 3];
                }

                const tagNames = {
                    0x010F: 'ç›¸æœºåˆ¶é€ å•†', 0x0110: 'ç›¸æœºå‹å·', 0x0112: 'æ–¹å‘',
                    0x011A: 'X åˆ†è¾¨ç‡', 0x011B: 'Y åˆ†è¾¨ç‡',
                    0x0131: 'è½¯ä»¶', 0x0132: 'ä¿®æ”¹æ—¶é—´',
                    0x9003: 'æ‹æ‘„æ—¶é—´', 0x9004: 'æ•°å­—åŒ–æ—¶é—´',
                    0x920A: 'ç„¦è·', 0xA405: 'ç„¦è·(35mm)',
                    0x829A: 'æ›å…‰æ—¶é—´', 0x829D: 'å…‰åœˆå€¼',
                    0x8827: 'ISO', 0x9209: 'é—ªå…‰ç¯',
                    0xA001: 'è‰²å½©ç©ºé—´', 0xA002: 'å›¾åƒå®½åº¦', 0xA003: 'å›¾åƒé«˜åº¦',
                    // GPS
                    0x0001: 'GPS çº¬åº¦æ–¹å‘', 0x0002: 'GPS çº¬åº¦',
                    0x0003: 'GPS ç»åº¦æ–¹å‘', 0x0004: 'GPS ç»åº¦',
                    0x0005: 'GPS é«˜åº¦å‚è€ƒ', 0x0006: 'GPS é«˜åº¦',
                };

                try {
                    const ifdOffset = tiffStart + readU32(tiffStart + 4);
                    readIFD(ifdOffset);

                    function readIFD(off) {
                        if (off >= segment.length - 2) return;
                        const count = readU16(off);
                        for (let i = 0; i < count && i < 50; i++) {
                            const entryOff = off + 2 + i * 12;
                            if (entryOff + 12 > segment.length) break;
                            const tag = readU16(entryOff);
                            const type = readU16(entryOff + 2);
                            const cnt = readU32(entryOff + 4);

                            if (tag === 0x8769) { // ExifIFD
                                const subOff = tiffStart + readU32(entryOff + 8);
                                readIFD(subOff);
                            } else if (tag === 0x8825) { // GPSIFD
                                const gpsOff = tiffStart + readU32(entryOff + 8);
                                readGPSIFD(gpsOff);
                            } else if (tagNames[tag]) {
                                let val = '';
                                if (type === 2) { // ASCII
                                    const strOff = cnt > 4 ? tiffStart + readU32(entryOff + 8) : entryOff + 8;
                                    for (let j = 0; j < cnt - 1 && strOff + j < segment.length; j++) val += String.fromCharCode(segment[strOff + j]);
                                } else if (type === 3) { // SHORT
                                    val = readU16(entryOff + 8).toString();
                                } else if (type === 4) { // LONG
                                    val = readU32(entryOff + 8).toString();
                                } else {
                                    val = `[äºŒè¿›åˆ¶æ•°æ®, ${cnt} é¡¹]`;
                                }
                                results.push({ key: tagNames[tag], value: val || '(ç©º)' });
                            }
                        }
                    }

                    function readGPSIFD(off) {
                        if (off >= segment.length - 2) return;
                        const count = readU16(off);
                        for (let i = 0; i < count && i < 20; i++) {
                            const entryOff = off + 2 + i * 12;
                            if (entryOff + 12 > segment.length) break;
                            const tag = readU16(entryOff);
                            const type = readU16(entryOff + 2);
                            const cnt = readU32(entryOff + 4);

                            const gpsNames = { 1: 'GPS çº¬åº¦æ–¹å‘', 2: 'GPS çº¬åº¦', 3: 'GPS ç»åº¦æ–¹å‘', 4: 'GPS ç»åº¦', 5: 'GPS é«˜åº¦å‚è€ƒ', 6: 'GPS é«˜åº¦', 7: 'GPS æ—¶é—´' };
                            if (gpsNames[tag]) {
                                let val = '';
                                if (type === 2) {
                                    const strOff = cnt > 4 ? tiffStart + readU32(entryOff + 8) : entryOff + 8;
                                    for (let j = 0; j < cnt - 1 && strOff + j < segment.length; j++) val += String.fromCharCode(segment[strOff + j]);
                                } else if (type === 5 && cnt <= 3) { // RATIONAL
                                    const rOff = tiffStart + readU32(entryOff + 8);
                                    const parts = [];
                                    for (let j = 0; j < cnt; j++) {
                                        const num = readU32(rOff + j * 8);
                                        const den = readU32(rOff + j * 8 + 4);
                                        parts.push(den ? (num / den).toFixed(4) : '0');
                                    }
                                    val = parts.join(', ');
                                } else {
                                    val = `[æ•°æ®, ${cnt} é¡¹]`;
                                }
                                results.push({ key: gpsNames[tag], value: val || '(ç©º)' });
                            }
                        }
                    }
                } catch (e) {
                    results.push({ key: 'è§£æçŠ¶æ€', value: 'éƒ¨åˆ†è§£æï¼ˆæ•°æ®ç»“æ„å¤æ‚ï¼‰' });
                }
            }

            function formatSize(b) { return b < 1024 ? b + ' B' : b < 1048576 ? (b / 1024).toFixed(1) + ' KB' : (b / 1048576).toFixed(1) + ' MB'; }
            function showToast(msg) { const t = document.getElementById('toast'); t.textContent = msg; t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 2500); }
        })();
    </script>
    <script src="../../shared/donate.js"></script>
</body>

</html>